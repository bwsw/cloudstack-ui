<cs-list
  (onAction)="activate()"
  [isOpen]="listService?.hasSelected()"
>
  <ng-container cs-panels>
    <cs-top-bar>
      <div class="options-panel">
        <cs-volume-filter *ngIf="zones && accounts"
          [zones]="zones"
          [groupings]="groupings"
          [accounts]="accounts"
          [searchPanelWhite]="selectedGroupings?.length && visibleVolumes?.length"
          (updateFilters)="updateFiltersAndFilter($event)"
          cs-list
        ></cs-volume-filter>
        <cs-view-mode-switch
          (onModeChange)="changeMode($event)"
          [key]="key">
        </cs-view-mode-switch>
      </div>
    </cs-top-bar>
  </ng-container>

  <cs-volume-list
    *loading="!volumes"
    [volumes]="visibleVolumes"
    [groupings]="selectedGroupings"
    [query]="query"
    [mode]="mode"
    cs-list
  ></cs-volume-list>

  <ng-container cs-sidebar>
    <cs-sidebar [isOpen]="listService?.hasSelected()">
      <router-outlet></router-outlet>
    </cs-sidebar>
  </ng-container>
</cs-list>
